<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Dashboard</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }

       /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
       #map {
        height: 425px;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 70%;
        margin: 0;
        padding: 0;
      }

    </style>

    <!-- Custom styles for this template -->
    <link href="../static/css/dashboard.css" rel="stylesheet">


  </head>

  <body>
    <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
      <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">Projet DRML</a>
  <!-- <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
  <ul class="navbar-nav px-3">
    <li class="nav-item text-nowrap">
      <a class="nav-link" href="#">Sign out</a>
    </li>
  </ul> -->
</nav>

<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-light sidebar">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href="/">
              <span data-feather="home"></span>
              Dashboard <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="topicsStats">
              <span data-feather="file"></span>
              Statistique des topics
            </a>
          </li>
          
        </ul>

      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">

      <h1>Statistiques des topics</h1>

      <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>Collection</th>
              <th>Tweets</th>
              <th>Réponses</th>
              <th>Tweets d'influencer(+1000 abo)</th>
              <th>Etiquette</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Topic 0</td>
              <td>19837 (12,12%)</td>
              <td>14242 (11.97%)</td>
              <td>15793 (14.54%)</td>
              <td>Innovation</td>
            </tr>
            <tr>
              <td>Topic 1</td>
              <td>24418 (14.92%)</td>
              <td>17700 (14.87%)</td>
              <td>13557 (12.48%)</td>
              <td>Data Privacy</td>
            </tr>
            <tr>
              <td>Topic 2</td>
              <td>19920 (12,17%)</td>
              <td>15082 (12.67%)</td>
              <td>13167 (12.12%)</td>
              <td>Smart Cities</td>
            </tr>
            <tr>
              <td>Topic 3</td>
              <td>18248 (11.15%)</td>
              <td>13515 (11.36%)</td>
              <td>11704 (10.78%)</td>
              <td>Industrial IOT treatment</td>
            </tr>
            <tr>
              <td>Topic 4</td>
              <td>63138 (38,57%)</td>
              <td>45145 (37.94%)</td>
              <td>42324 (38.97%)</td>
              <td>IOT in Home</td>
            </tr>
            <tr>
              <td>Topic 5</td>
              <td>18144 (11.08%)</td>
              <td>13320 (11.19%)</td>
              <td>12074 (11.12%)</td>
              <td>IOT in Companies</td>
            </tr>
          </tbody>
        </table>
      </div>
      <br><br>
      <div class="container-fluid">
        <hr>
        <div class="dropdown show">
          <a class="btn btn-secondary btn-lg dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Select Topic
          </a>

          <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <a class="dropdown-item" href="?topic=1">Topic 1</a>
            <a class="dropdown-item" href="?topic=2">Topic 2</a>
            <a class="dropdown-item" href="?topic=3">Topic 3</a>
            <a class="dropdown-item" href="?topic=4">Topic 4</a>
            <a class="dropdown-item" href="?topic=5">Topic 5</a>
            <a class="dropdown-item" href="?topic=6">Topic 6</a>
          </div>
        </div>
      </div>
      <br><br>
      <hr>
      <div class="container-fluid">


        <div class="col-md-2">
          <h2>Utilisateurs</h2>
        </div>
      </div>

      <div class="container-fluid ">
        <div style=" top:60px; left:10px; width:300px; height:300px; text-align:center; ">
          <canvas id="usersDoughnutChart" width="200" height="200"></canvas>
        </div>
        <h2>Répartition Géographique</h2>
        <div id="regions_div" style="width: 900px; height: 500px;"></div>

      </div>
      <br><br>
      <hr>

      <div class="container-fluid">
        <div class="col-md-2">
          <h2>Avis</h2>
        </div>
      </div>

      <div class="container-fluid ">
        <div style=" top:60px; left:10px; width:300px; height:300px; text-align:center; ">
          <canvas id="opinionDoughnutChart" width="200" height="200"></canvas>
        </div>

        <!--   <div id="map"></div> -->

      </div>
      <br><br>

      <hr>
      <div class="container-fluid">
        <div class="col-md-2">
          <h2>Hashtags</h2>
        </div>
      </div>
      <div class="container-fluid ">
        <div style=" top:60px; left:10px; width:450px; height:500px; text-align:center; ">
          <canvas id="hastagBarChart" width="200" height="200"></canvas>
        </div>

      </div>
      <br><br>
      <hr>

      <div class="container-fluid">
        <div class="col-md-2">
          <h2>Time Series</h2>
        </div>
      </div>

      <div class="container-fluid"><h3>Tweets</h3></div>
      <div class="container-fluid ">
        <div style=" top:60px; left:10px; width:1000px; height:300px; text-align:center; ">
          <canvas id="replySerie" width="200" height="200"></canvas>
        </div>
          <h4>Analyse</h4>
          <div>
              -Conference IOT in october each year
          </div>
          <div>
              -IOT StreamConf april 23rd 2015
          </div>


      </div>

      <div class="container-fluid"><h3>Users</h3></div>
      <div class="container-fluid ">
        <div style=" top:60px; left:10px; width:1000px; height:300px; text-align:center; ">
          <canvas id="userSerie" width="200" height="200"></canvas>
        </div>

      </div>


      <br><br><hr>
    </main>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="../static/js/dashboard.js"></script>
<script src="../static/js/utils.js"></script>

<script>



    function $_GET(param) {
	var vars = {};
	window.location.href.replace( location.hash, '' ).replace(
		/[?&]+([^=&]+)=?([^&]*)?/gi, // regexp
		function( m, key, value ) { // callback
			vars[key] = value !== undefined ? value : '';
		}
	);

	if ( param ) {
		return vars[param] ? vars[param] : null;
	}
	return vars;
}

    var topic = $_GET('topic')
    console.log(topic)




      google.charts.load('current', {
        'packages':['geochart'],
        // Note: you will need to get a mapsApiKey for your project.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
      });
      google.charts.setOnLoadCallback(drawRegionsMap);



      function drawRegionsMap() {

      //A améliorer si le temps !!!
          var data = google.visualization.arrayToDataTable([
                        ['Country', 'Popularity'],['ae',111], ['ar',14], ['at',23], ['au',260], ['bd',1], ['be',127], ['bg',8], ['bh',1], ['br',59], ['ca',333], ['ch',84], ['cl',6], ['cm',1], ['cn',31], ['co',15], ['cy',2], ['cz',5], ['de',349], ['dk',39], ['do',1], ['ec',5], ['ee',3], ['eg',7], ['es',367], ['fi',72], ['fr',365], ['gb',1944], ['gh',3], ['gr',8], ['hr',1], ['hu',2], ['id',103], ['ie',107], ['il',41], ['in',569], ['ir',1], ['it',182], ['jm',10], ['jo',3], ['jp',14], ['ke',28], ['kr',6], ['lb',3], ['lk',3], ['lu',11], ['ma',4], ['mc',2], ['mt',13], ['mu',1], ['mx',16], ['my',32], ['ng',30], ['nl',385], ['no',15], ['np',8], ['nz',18], ['om',3], ['pe',6], ['ph',34], ['pk',15], ['pl',27], ['pt',8], ['qa',1], ['ro',7], ['rs',6], ['ru',7], ['rw',1], ['sa',1], ['se',67], ['sg',80], ['si',14], ['sk',2], ['th',40], ['tn',42], ['tr',24], ['tw',2], ['tz',1], ['ua',2], ['us',13523], ['uy',1], ['ve',6], ['vn',5]]);

            switch (topic) {

                case '1':
                      var data = google.visualization.arrayToDataTable([
                            ['Country', 'Popularity'],['ae',111], ['ar',14], ['at',23], ['au',260], ['bd',1], ['be',127], ['bg',8], ['bh',1], ['br',59], ['ca',333], ['ch',84], ['cl',6], ['cm',1], ['cn',31], ['co',15], ['cy',2], ['cz',5], ['de',349], ['dk',39], ['do',1], ['ec',5], ['ee',3], ['eg',7], ['es',367], ['fi',72], ['fr',365], ['gb',1944], ['gh',3], ['gr',8], ['hr',1], ['hu',2], ['id',103], ['ie',107], ['il',41], ['in',569], ['ir',1], ['it',182], ['jm',10], ['jo',3], ['jp',14], ['ke',28], ['kr',6], ['lb',3], ['lk',3], ['lu',11], ['ma',4], ['mc',2], ['mt',13], ['mu',1], ['mx',16], ['my',32], ['ng',30], ['nl',385], ['no',15], ['np',8], ['nz',18], ['om',3], ['pe',6], ['ph',34], ['pk',15], ['pl',27], ['pt',8], ['qa',1], ['ro',7], ['rs',6], ['ru',7], ['rw',1], ['sa',1], ['se',67], ['sg',80], ['si',14], ['sk',2], ['th',40], ['tn',42], ['tr',24], ['tw',2], ['tz',1], ['ua',2], ['us',13523], ['uy',1], ['ve',6], ['vn',5]]);
                      break;
                case '2':
                    var data = google.visualization.arrayToDataTable([
                        ['Country', 'Popularity'],['ad',1],['ae',46],['al',1],['ar',35],['at',37],['au',557],['ba',1],['bd',2],['be',221],['bg',7],['br',107],['ca',667],['ch',125],['cl',10],['cm',5],['cn',46],['co',12],['cr',5],['cz',13],['de',554],['dk',71],['do',1],['ec',8],['ee',3],['eg',14],['es',481],['fi',161],['fr',393],['gb',3636],['gh',6],['gr',21], ['gt',1], ['hr',1], ['ht',1], ['hu',7], ['id',131], ['ie',172], ['il',31], ['in',945], ['ir',2], ['is',1], ['it',518], ['jm',51], ['jo',5], ['jp',16], ['ke',35], ['kh',1], ['kr',10], ['kw',3], ['lb',7], ['lk',4], ['lt',1], ['lu',19], ['lv',1], ['ma',14], ['mn',1], ['mt',7], ['mu',1], ['mx',30], ['my',46], ['ng',50], ['nl',433], ['no',23], ['np',9], ['nz',82], ['om',6], ['pa',1], ['pe',7], ['ph',51], ['pk',26], ['pl',52], ['pt',9], ['ro',32], ['rs',10], ['ru',10], ['sa',5], ['se',158], ['sg',94], ['si',2], ['sv',1], ['th',88], ['tn',43], ['tr',31], ['tt',1], ['tw',1], ['ua',3], ['ug',2], ['us',13756], ['uy',1], ['ve',6], ['vn',3], ['za',112]]);
                    break;
                case '3':
                    var data = google.visualization.arrayToDataTable([
                        ['Country', 'Popularity'],['ae',50], ['ar',36], ['at',31], ['au',433], ['bd',1], ['be',202], ['bg',7], ['bh',1], ['bm',1], ['br',71], ['ca',616], ['ch',78], ['cl',11], ['cm',2], ['cn',48], ['co',13], ['cr',1], ['cz',6], ['de',507], ['dk',40], ['dz',1], ['ec',3], ['ee',1], ['eg',17], ['es',830], ['fi',134], ['fr',418], ['gb',3273], ['gg',1], ['gh',13], ['gr',7], ['hr',5], ['hu',7], ['id',151], ['ie',147], ['il',20], ['im',5], ['in',788], ['ir',4], ['it',304], ['jm',1], ['jo',5], ['jp',24], ['ke',33], ['kr',9], ['kw',2], ['kz',1], ['lb',4], ['lk',6], ['lu',12], ['lv',1], ['ma',1], ['mc',1], ['mk',1], ['mm',2], ['mt',1], ['mu',1], ['mv',1], ['mx',27], ['my',45], ['ng',70], ['nl',370], ['no',26], ['np',3], ['nz',73], ['om',8], ['pa',1], ['pe',8], ['ph',113], ['pk',29], ['pl',71], ['ps',4], ['pt',13], ['qa',3], ['ro',13], ['rs',9], ['ru',11], ['rw',1], ['sa',7], ['sd',1], ['se',133], ['sg',84], ['si',8], ['sk',2], ['th',70], ['tn',44], ['tr',36], ['tt',2], ['tw',7], ['ua',3], ['ug',2], ['us',10111], ['ve',5], ['vn',8], ['za',107]]);
                    break;
                case '4':
                    var data = google.visualization.arrayToDataTable([
                        ['Country', 'Popularity'],['ae',52], ['af',1], ['ar',17], ['at',30], ['au',353], ['be',183], ['bg',6], ['bo',1], ['br',72], ['ca',553], ['ch',129], ['cl',5], ['cn',24], ['co',18], ['cr',1], ['cz',8], ['de',462], ['dk',45], ['do',1], ['ec',4], ['eg',11], ['es',241], ['fi',104], ['fr',332], ['gb',2767], ['gg',1], ['gh',4], ['gr',18], ['gt',1], ['hr',3], ['hu',8], ['id',246], ['ie',103], ['il',29], ['in',556], ['ir',5], ['is',2], ['it',295], ['jm',4], ['jo',1], ['jp',15], ['ke',22], ['kr',11], ['lb',6], ['lk',7], ['lu',13], ['lv',2], ['ma',3], ['md',1], ['mg',1], ['mt',4], ['mu',2], ['mx',27], ['my',40], ['ng',38], ['nl',574], ['no',51], ['np',1], ['nz',48], ['om',2], ['pe',4], ['ph',52], ['pk',13], ['pl',35], ['pt',4], ['py',1], ['qa',1], ['ro',8], ['rs',8], ['ru',6], ['sa',5], ['sd',1], ['se',98], ['sg',84], ['si',6], ['sk',1], ['th',65], ['tn',14], ['tr',23], ['tw',3], ['tz',2], ['ua',3], ['ug',6], ['us',10114], ['ve',6], ['vn',2], ['za',116], ['zm',1] ]);
                    break;
                case '5':
                    var data = google.visualization.arrayToDataTable([
                        ['Country', 'Popularity'],['ae',196], ['af',1], ['al',3], ['am',1], ['ar',101], ['at',134], ['au',1588], ['ba',4], ['bb',1], ['bd',3], ['be',591], ['bg',35], ['bh',14], ['bn',3], ['bo',3], ['br',409], ['bw',3], ['by',1], ['ca',2029], ['cd',1], ['ch',390], ['ci',1], ['cl',38], ['cm',6], ['cn',159], ['co',64], ['cr',10], ['cy',4], ['cz',33], ['de',1283], ['dk',165], ['do',43], ['dz',1], ['ec',33], ['ee',11], ['eg',83], ['es',1317], ['et',2], ['fi',327], ['fj',1], ['fr',1170], ['gb',11184], ['ge',1], ['gh',20], ['gr',74], ['gt',2], ['gu',1], ['hn',1], ['hr',15], ['ht',1], ['hu',23], ['id',302], ['ie',475], ['il',141], ['im',3], ['in',2009], ['ir',4], ['is',5], ['it',689], ['je',4], ['jm',8], ['jo',15], ['jp',109], ['ke',154], ['kh',3], ['kr',44], ['kw',4], ['ky',1], ['kz',2], ['lb',28], ['lc',1], ['lk',14], ['lt',3], ['lu',29], ['lv',5], ['ma',13], ['mc',1], ['me',1], ['mk',1], ['mm',1], ['mt',21], ['mu',2], ['mv',11], ['mx',206], ['my',148], ['ng',168], ['nl',1292], ['no',72], ['np',5], ['nz',387], ['om',17], ['pa',5], ['pe',33], ['ph',384], ['pk',48], ['pl',114], ['pt',66], ['py',3], ['qa',5], ['ro',37], ['rs',23], ['ru',42], ['rw',4], ['sa',43], ['sd',5], ['se',363], ['sg',200], ['si',11], ['sk',2], ['sn',1], ['sv',4], ['th',183], ['tn',60], ['tr',133], ['tt',2], ['tw',12], ['tz',6], ['ua',17], ['ug',20], ['us',32785], ['uy',4], ['uz',1], ['ve',41], ['vn',16], ['za',472], ['zm',2] ]);
                    break;
                case '6':
                    var data = google.visualization.arrayToDataTable([
                        ['Country', 'Popularity'],['ae',44], ['af',1], ['ar',20], ['at',46], ['au',410], ['ba',1], ['be',159], ['bg',8], ['br',79], ['ca',531], ['ch',99], ['cl',7], ['cm',2], ['cn',21], ['co',15], ['cr',3], ['cy',4], ['cz',7], ['de',389], ['dk',51], ['do',1], ['dz',1], ['ec',8], ['ee',1], ['eg',4], ['es',394], ['fi',131], ['fr',355], ['gb',2950], ['gh',5], ['gr',18], ['gt',3], ['hn',1], ['hr',7], ['hu',2], ['id',104], ['ie',128], ['il',89], ['in',890], ['it',252], ['jm',6], ['jo',4], ['jp',22], ['ke',33], ['kr',8], ['kw',2], ['lk',1], ['lu',8], ['lv',2], ['mk',2], ['mt',6], ['mu',1], ['mv',1], ['mx',22], ['my',47], ['na',1], ['ng',51], ['nl',319], ['no',40], ['np',5], ['nz',49], ['om',5], ['pe',5], ['ph',54], ['pk',13], ['pl',39], ['ps',1], ['pt',11], ['py',1], ['qa',2], ['ro',15], ['rs',8], ['ru',9], ['sa',3], ['se',95], ['sg',65], ['si',2], ['sk',5], ['th',78], ['tn',23], ['tr',29], ['tt',2], ['tw',2], ['tz',1], ['ua',1], ['us',9690], ['ve',8], ['vn',2], ['za',103] ]);
                    break;

            }



        var options = {};

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

        chart.draw(data, options);
      }























      var userC = document.getElementById('usersDoughnutChart').getContext("2d");
      userC.canvas.width =180;
      userC.canvas.height = 180;
      // And for a doughnut chart
      data = {
        datasets: [{
          data: [{{ gH }}, {{ gF }}, {{ gU }}],
          backgroundColor: [
          'rgba(0, 0, 255, 0.5)',
          'rgba(181, 27, 27, 0.5)',
          'rgba(27, 181, 104, 0.5)'
          ]
        }],

          // These labels appear in the legend and in the tooltips when hovering different arcs
          labels: [
          'Male',
          'Female',
          'Unknown'
          ]
        };
        var myDoughnutChart = new Chart(userC, {
          type: 'doughnut',
          data: data
        });


        var opinonC = document.getElementById('opinionDoughnutChart').getContext("2d");
        opinonC.canvas.width = 180;
        opinonC.canvas.height = 180;
      // And for a doughnut chart
      data = {
        datasets: [{
          data: [{{aP}}, {{aN}}, {{aNe}} ],
          backgroundColor: [
          'rgba(0, 0, 255, 0.5)',
          'rgba(181, 27, 27, 0.5)',
          'rgba(27, 181, 104, 0.5)'
          ]
        }],

          // These labels appear in the legend and in the tooltips when hovering different arcs
          labels: [
          'Positive',
          'Negative',
          'Neutral'
          ]
        };
        var myDoughnutChart = new Chart(opinonC, {
          type: 'doughnut',
          data: data
        });



        var hashtag = document.getElementById('hastagBarChart');
        var dataHashtag = {
          "labels":[{% for t in hText %} "{{t}}" {%if t != loop.last %} , {%endif%} {%endfor%} ],
          "datasets":[
          {"label":"",
          "data":[{% for t in hCant %} {{t}} {%if t != loop.last %} , {%endif%} {%endfor%} ],
          "fill":false,
          "backgroundColor":[
          "rgba(255, 99, 132, 0.2)",
          "rgba(255, 159, 64, 0.2)",
          "rgba(255, 205, 86, 0.2)",
          "rgba(75, 192, 192, 0.2)",
          "rgba(54, 162, 235, 0.2)",
          "rgba(153, 102, 255, 0.2)",
          "rgba(201, 203, 207, 0.2)"
          ],
          "borderColor":[
          "rgb(255, 99, 132)",
          "rgb(255, 159, 64)",
          "rgb(255, 205, 86)",
          "rgb(75, 192, 192)",
          "rgb(54, 162, 235)",
          "rgb(153, 102, 255)",
          "rgb(201, 203, 207)"
          ],
          "borderWidth":1}
          ]}

          var hastagBarChart = new Chart(hashtag, {
            type: 'horizontalBar',
            data: dataHashtag,
            options: {"scales":{"xAxes":[{"ticks":{"beginAtZero":true}}]}}
          });


          /// TIME SERIES 1
          var color = Chart.helpers.color;
          var userSerie = document.getElementById('replySerie').getContext('2d');
          userSerie.canvas.width = 1000;
          userSerie.canvas.height = 300;

          const dataTS = {
              // Labels should be Date objects
              labels:  [{% for t in ts1D %} new Date( {{ t[1] }}, {{ t[0] }}, 1 ) {%if t != loop.last %} , {%endif%} {%endfor%}] ,
              datasets: [{
                  fill: false,
                  label: 'Tweets flow',
                  data: [{% for t in ts1V %} {{t}} {%if t != loop.last %} , {%endif%} {%endfor%}] ,
                  borderColor: '#fe8b36',
                  backgroundColor: '#fe8b36',
                  lineTension: 0,
              }]
          }

          const options = {
              type: 'line',
              data: dataTS,
              options: {
                  fill: false,
                  responsive: true,
                  scales: {
                      xAxes: [{
                          type: 'time',
                          display: true,
                          scaleLabel: {
                              display: true,
                              labelString: "Date",
                          }
                      }],
                      yAxes: [{
                          ticks: {
                              beginAtZero: true,
                          },
                          display: true,
                          scaleLabel: {
                              display: true,
                              labelString: "# Tweets",
                          }
                      }]
                  }
              }
          }

          var chart = new Chart(userSerie, options);


          /// TIME SERIES 2
          var color = Chart.helpers.color;
          var userSerie = document.getElementById('userSerie').getContext('2d');
          userSerie.canvas.width = 1000;
          userSerie.canvas.height = 300;

          const dataTS2 = {
              // Labels should be Date objects
              labels:  [{% for t in ts2D %} new Date( {{ t[1] }}, {{ t[0] }}, 1 ) {%if t != loop.last %} , {%endif%} {%endfor%}] ,
              datasets: [{
                  fill: false,
                  label: 'User Interaction',
                  data: [{% for t in ts2V %} {{t}} {%if t != loop.last %} , {%endif%} {%endfor%}] ,
                  borderColor: '#fe8b36',
                  backgroundColor: '#fe8b36',
                  lineTension: 0,
              }]
          }

          const options2 = {
              type: 'line',
              data: dataTS2,
              options: {
                  fill: false,
                  responsive: true,
                  scales: {
                      xAxes: [{
                          type: 'time',
                          display: true,
                          scaleLabel: {
                              display: true,
                              labelString: "Date",
                          }
                      }],
                      yAxes: [{
                          ticks: {
                              beginAtZero: true,
                          },
                          display: true,
                          scaleLabel: {
                              display: true,
                              labelString: "# Users",
                          }
                      }]
                  }
              }
          }

          var chart2 = new Chart(userSerie, options2);

        </script>
        <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAYzV9LfgmXBPzH_GMzYiXTVGr8xnTQVjA
        &callback=initMap">
      </script>

    </body>


    </html>
